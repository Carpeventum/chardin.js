(function(){var n=[].slice;(function(t,i){var r;return r=function(){function n(n){this.data_attribute="data-intro";this.chardinCssClasses=["chardinjs-helper-layer","chardinjs-show-element","chardinjs-relative-position"];this.$el=t(n);this.sequenced=this.$el.data("chardin-sequenced")?!0:!1;this.sequencedItems=this._getSequencedElements();this.sequenceIdx=0;this.active=!1;this.timeOut=null;this.isAuto=this.$el.data("chardin-auto")?!0:!1;this.delayTime=this.$el.data("chardin-delay")||2e3;t(i).resize(function(n){return function(){return n.refresh()}}(this))}return n.prototype.start=function(){var i,n,r,t;if(this._overlay_visible())return!1;if(this._add_overlay_layer(),this.sequenced)this.sequenceIdx=0,this._show_sequenced_element();else for(t=this.$el.find("*["+this.data_attribute+"]:visible"),n=0,r=t.length;n<r;n++)i=t[n],this._show_element(i);return this.active=!0,this.$el.trigger("chardinJs:start")},n.prototype.toggle=function(){return this._overlay_visible()?this.stop():this.start()},n.prototype.refresh=function(){var r,n,u,t,i;if(this._overlay_visible()){for(t=this.$el.find("*["+this.data_attribute+"]:visible"),i=[],n=0,u=t.length;n<u;n++)r=t[n],i.push(this._position_helper_layer(r));return i}return this},n.prototype.stop=function(){var u,n,f,r;for(this.$el.find(".chardinjs-overlay").fadeOut(function(){return t(this).remove()}),this.active=!1,this.$el.find(".chardinjs-helper-layer").remove(),r=this.chardinCssClasses,n=0,f=r.length;n<f;n++)u=r[n],this._remove_classes(u);return i.removeEventListener?i.removeEventListener("keydown",this._onKeyDown,!0):document.detachEvent&&document.detachEvent("onkeydown",this._onKeyDown),this.sequenceIdx=0,this.$el.trigger("chardinJs:stop")},n.prototype._remove_classes=function(n){return this.$el.find("."+n).removeClass(n)},n.prototype.set_data_attribute=function(n){return this.data_attribute=n},n.prototype.set_data_helptext=function(n){return this.data_helptext=n},n.prototype._overlay_visible=function(){return this.$el.find(".chardinjs-overlay").length!==0},n.prototype._add_overlay_layer=function(){var i,n,t,r=this;return this._overlay_visible()?!1:(n=document.createElement("div"),t="",n.className="chardinjs-overlay",this.$el.prop("tagName").toUpperCase()==="BODY"?(t+="top: 0;bottom: 0; left: 0;right: 0;position: fixed;",n.setAttribute("style",t)):(i=this._get_offset(this.$el.get()[0]),i&&(t+="width: "+i.width+"px; height:"+i.height+"px; top:"+i.top+"px;left: "+i.left+"px;",n.setAttribute("style",t))),this.$el.get()[0].appendChild(n),n.onclick=function(n){return r.sequenced?r._handleMouseClick(n):r.stop()},setTimeout(function(){return t+="opacity: .8;-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=80)';filter: alpha(opacity=80);",n.setAttribute("style",t)},10))},n.prototype._get_position=function(n){var t,r,i=n.getAttribute(this.data_attribute);return t=i[0]=="#"&&this.data_helptext[i].position?this.data_helptext[i].position:n.getAttribute("data-position"),t==null?"bottom":(r=t.split(":"))!=null?r[0]:t},n.prototype._get_offset_override=function(n){var t,r,i=n.getAttribute(this.data_attribute);return t=i[0]=="#"&&this.data_helptext[i].position?this.data_helptext[i].position:n.getAttribute("data-position"),t==null?1:1+parseInt(((r=t.split(":"))!=null?r[1]:void 0)||0,10)/100},n.prototype._get_css_attribute=function(n){var u,r,i,f,t;if(t=n.getAttribute(this.data_attribute+"-css")||"",t&&String(t).replace(/\s/g,"").length>1)for(r=t.split(" ").filter(function(n){return n.length!==0}),i=0,f=r.length;i<f;i++)u=r[i],this._add_css_attribute(u);return t},n.prototype._add_css_attribute=function(n){if(!t.inArray(n,this.chardinCssClasses)>-1)return this.chardinCssClasses.push(n)},n.prototype._getStyle=function(n,t,r){return i.getComputedStyle?i.getComputedStyle(n,r).getPropertyValue(t):n.currentStyle[t]},n.prototype._place_tooltip=function(n,i){var u,s,r,f,h,c,l,e,o;o=this._get_offset(i);i.style.top=null;i.style.right=null;i.style.bottom=null;i.style.left=null;r=this._get_position(n);switch(r){case"top":case"bottom":return f=this._get_offset(n),c=f.width,my_width=parseFloat(this._getStyle(i,"width")),i.style.left=""+(c/2*this._get_offset_override(n)-o.width/2)+"px",my_width&&t(i).width(my_width),i.style[r]="-"+o.height+"px";case"left":case"right":return e=parseFloat(this._getStyle(i,"max-width")),i.style[r]="-"+e+"px",f=this._get_offset(n),h=f.height,u=parseFloat(this._getStyle(i,"height")),u&&t(i).height(u),i.style.top=""+(h/2*this._get_offset_override(n)-u/2)+"px",l=parseFloat(this._getStyle(i,"width")),s=175-(e-l),i.style[r]="-"+s+"px"}},n.prototype._position_helper_layer=function(n){var i,r;return r=t(n).data("helper_layer"),i=this._get_offset(n),t(n).is(":visible")&&r&&r.setAttribute("style","display: block; width: "+i.width+"px; height:"+i.height+"px; top:"+i.top+"px; left: "+i.left+"px;"),t(n).is(":visible")&&!r&&this._show_element(n),!t(n).is(":visible")&&r?r.setAttribute("style","display: none; width: "+i.width+"px; height:"+i.height+"px; top:"+i.top+"px; left: "+i.left+"px;"):void 0},n.prototype._remove_sequenced_element=function(n){return t(".chardinjs-helper-layer").eq(n).empty().remove(),t(".chardinjs-show-element").removeClass("chardinjs-show-element")},n.prototype._show_element=function(n){var i,u,r,f,e;if(u=document.createElement("div"),r=document.createElement("div"),f=n.getAttribute(this.data_attribute),f[0]=="#")if(e=this.data_helptext[f],e!=undefined)r.innerHTML="<div class='chardinjs-tooltiptext'>"+e.text+"<\/div>";else return!1;else r.innerHTML="<div class='chardinjs-tooltiptext'>"+f+"<\/div>";return(t(n).data("helper_layer",u).data("tooltip_layer",r),n.id&&u.setAttribute("data-id",n.id),u.className="chardinjs-helper-layer chardinjs-"+this._get_position(n),this._position_helper_layer(n),this.$el.get()[0].appendChild(u),r.className="chardinjs-tooltip chardinjs-"+this._get_position(n),u.appendChild(r),this._place_tooltip(n,r),n.className+=" chardinjs-show-element "+this._get_css_attribute(n),i="",n.currentStyle?i=n.currentStyle.position:document.defaultView&&document.defaultView.getComputedStyle&&(i=document.defaultView.getComputedStyle(n,null).getPropertyValue("position")),i=i.toLowerCase(),i!=="absolute"&&i!=="relative")?n.className+=" chardinjs-relative-position":!0},n.prototype._show_sequenced_element=function(){var n=this;if(this.sequenceIdx<0&&(this.sequenceIdx=0),!this.sequencedItems[this.sequenceIdx])return this.stop();while(!this._show_element(this.sequencedItems[this.sequenceIdx]))this.sequenceIdx++;if(this.sequenceIdx<this.sequencedItems.length-1){if(this.isAuto)return this.timeOut=setTimeout(function(){return n.next(n.isAuto)},this.delayTime)}else if(this.isAuto)return this.timeOut=setTimeout(function(){return n.stop()},this.delayTime)},n.prototype.next=function(n){var t=this;return n=n!==!1?!0:!1,this.sequenceIdx++,n?(clearTimeout(this.timeOut),this.timeOut=setTimeout(function(){return t._remove_sequenced_element(0),t._show_sequenced_element(!0),t.$el.trigger("chardinJs:next")},this.delayTime)):(this._remove_sequenced_element(0),this._show_sequenced_element(!1),this.$el.trigger("chardinJs:next"))},n.prototype.previous=function(n){var t=this;return n=n!==!1?!0:!1,this.sequenceIdx--,n?(clearTimeout(this.timeOut),this.timeOut=setTimeout(function(){return t._remove_sequenced_element(0),t._show_sequenced_element(!0),t.$el.trigger("chardinJs:previous")},this.delayTime)):(this._remove_sequenced_element(0),this._show_sequenced_element(!1),this.$el.trigger("chardinJs:previous"))},n.prototype._handleMouseClick=function(n){if(this.active){var t;return t=this._getMaxSize(),n=n||i.event,n.clientX>=t.width/2&&this.next(!1),n.clientX<=t.width/2?this.previous(!1):void 0}},n.prototype._getMaxSize=function(){var t,i,n,r;return t=document.body,n=document.documentElement,i=Math.max(t.scrollHeight,t.offsetHeight,n.clientHeight,n.scrollHeight,n.offsetHeight),r=Math.max(t.scrollWidth,t.offsetWidth,n.clientWidth,n.scrollWidth,n.offsetWidth),{width:r,height:i}},n.prototype._getSequencedElements=function(){return this.$el.find("*[data-intro]").sort(function(n,i){var r,u;return r=t(n).data("sequence")||100,u=t(i).data("sequence")||100,r-u})},n.prototype._get_offset=function(n){var i,r,t;for(t={width:n.offsetWidth,height:n.offsetHeight},i=0,r=0;n&&!isNaN(n.offsetLeft)&&!isNaN(n.offsetTop);)i+=n.offsetLeft,r+=n.offsetTop,n=n.offsetParent;return t.top=r,t.left=i,t},n}(),t.fn.extend({chardinJs:function(){var f,e,u,i;return i=arguments[0],e=2<=arguments.length?n.call(arguments,1):[],f=t(this[0]),u=f.data("chardinJs"),u||f.data("chardinJs",u=new r(this,i)),typeof i=="string"?u[i].apply(u,e):typeof i=="object"&&(typeof i.attribute=="string"&&u.set_data_attribute(i.attribute),typeof i.method=="string"&&u[i.method].apply(u,e),typeof i.url=="string"&&t.ajax({type:"GET",url:i.url,dataType:"json",success:function(n){u.set_data_helptext(n)}})),u}})})(window.jQuery,window)}).call(this);